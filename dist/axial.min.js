!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.Axial=t(require("react")):e.Axial=t(e.react)}(this,function(e){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){"use strict";function o(e,t,n){for(var o=e,r=t.split("."),i=r.length-1,u=null,c=0;c<i;c++)u=r[c],o.hasOwnProperty(u)||(o[u]={}),o=o[u];o[r[i]]=n}function r(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t.split("."),r=o.length,i=e,u=null,c=0;c<r;c++)if(u=o[c],null===(i=i[u])||void 0===i){if(!0===n)throw new Error('Object not found at path "'+t+'"');return i}return i}function i(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return void 0===n&&(n=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),t)),n.hasOwnProperty("value")?d:"function"==typeof n.get&&"function"==typeof n.set?b:"function"==typeof n.get?h:v}function u(e){var t=e;return"object"===(void 0===e?"undefined":l(e))&&null!==e&&function(){for(;;)if(null===Object.getPrototypeOf(t=Object.getPrototypeOf(t)))break;return Object.getPrototypeOf(e)===t}()}function c(e){for(var t=function(t){return function(){return t.apply(e,arguments)}},n=a(e),o=0;o<n.length;o++){var r=n[o];u(e[r])&&function e(n){var o=a(n);(0,y.scope_ref)(n);for(var r=0;r<o.length;r++){var i=o[r],c=n[i];"function"==typeof c?n[i]=t(c):u(c)&&e(c)}}(e[r])}}function a(e){return Object.keys(e)}function f(e,t,n){Object.defineProperty(e,t,{set:n})}function s(e,t,n){Object.defineProperty(e,t,{get:n})}function p(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,configurable:!0,enumerable:!0})}Object.defineProperty(t,"__esModule",{value:!0}),t.SETTER=t.GETTER=t.ACCESSOR=t.DATA=void 0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.setObjectAtPath=o,t.getObjectAtPath=r,t.getTypeOfProperty=i,t.isObjectLiteral=u,t.recursiveSetRootContext=c,t.getObjectKeys=a,t.setter=f,t.getter=s,t.getterSetter=p;var y=(n(1),n(2)),d=t.DATA="data",b=t.ACCESSOR="accessor",h=t.GETTER="getter",v=t.SETTER="setter"},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Scope=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(0),c=n(2);t.Scope=function(){function e(t){var n=this;o(this,e);var i=(0,u.getObjectKeys)(t);(0,u.recursiveSetRootContext)(t),(0,u.getter)(t,c.META_TOKEN,function(){return n}),this.ref=t;var a=[];this.listeners=a;var f={};i.forEach(function(e){var o=t[e],i=(0,u.getTypeOfProperty)(t,e);if("function"!==(void 0===o?"undefined":r(o))&&i===u.DATA){if(Array.isArray(o))for(var a=o.length,s=0;s<a;s++)o[s]=(0,c.scope_ref)(o[s]);f[e]=o,(0,u.getterSetter)(t,e,function(){return f[e]},function(t){var o=f[e];f[e]=t,n.update(e,t,o)})}}),this.keys=i}return i(e,[{key:"bind",value:function(e){var t=this,n=this.listeners;n.push(e),this.keys.forEach(function(n){var o=t.ref[n];(0,c.is_scope)(o)&&o[c.META_TOKEN].bind(e)}),console.log({type:"bind",ref:this.ref.name,listener:e,listeners:n})}},{key:"update",value:function(e,t,n){var o=this,r=this.listeners;console.group("update["+this.listeners.length+'] key:"'+e+' value:"'+t+'" oldValue:"'+n+'"'),r.forEach(function(r){console.log({"listener:":r}),r.update(e,t,n,o.ref)}),console.groupEnd()}},{key:"hasBinding",value:function(e){return this.listeners.indexOf(e)>-1}},{key:"unbind",value:function(e){var t=this.listeners,n=t.indexOf(e);-1!==n&&(t.splice(n,1),console.log({type:"unbind",ref:this.ref.name,listener:e,listeners:t}))}}]),e}()},function(e,t,n){"use strict";function o(){return l.slice()}function r(){return l[l.length-1]}function i(e){return e=c(e),l.push(e),e}function u(e){if(e instanceof p.Scope)return e;var t=e[y];return t&&t instanceof p.Scope}function c(e){return u(e)?e:((0,s.isObjectLiteral)(e)&&new p.Scope(e),e)}function a(e){return e[y]?e[y]:c(e)[y]}function f(){return l.pop()}Object.defineProperty(t,"__esModule",{value:!0}),t.META_TOKEN=void 0,t.scopes=o,t.peek=r,t.push=i,t.is_scope=u,t.scope_ref=c,t.as_scope=a,t.pop=f;var s=n(0),p=n(1),l=[],y=t.META_TOKEN="__scope__"},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=o(r),u=n(1),c=o(u),a=n(2),f={Scope:c.default,Component:i.default,get scope(){return(0,a.peek)()},set scope(e){return e=(0,a.scope_ref)(e),(0,a.push)(e),e}};t.default=f},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.REACT_EVENTS=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(0),a=n(2),f=n(5),s=function(e){return e&&e.__esModule?e:{default:e}}(f),p=t.REACT_EVENTS=["onCopy","onCut","onPaste","onCompositionEnd","onCompositionStart","onCompositionUpdate","onKeyDown","onKeyPress","onKeyUp","onFocus","onBlur","onChange","onInput","onInvalid","onSubmit","onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOutnMouseOver","onMouseUp","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onScroll","onWheel","onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","nWaiting","onLoad","onError","onAnimationStart","onAnimationEnd","onAnimationIteration","onTransitionEnd","onToggle"],l=0,y=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=(0,a.peek)(),u=i,f=n.scope;u=f&&(0,a.scope_ref)(f)||u;var s=e.hasOwnProperty("scope");if(u=s?(0,a.scope_ref)(e.scope):u,(0,c.getterSetter)(n,"scope",function(){return u},function(e){(0,a.as_scope)(u).unbind(n),e=(0,a.scope_ref)(e),e!==i&&(0,a.push)(e),u=e,u[a.META_TOKEN].keys.forEach(function(e){(0,c.getterSetter)(n,e,function(){return u[e]},function(t){return u[e]=t})}),n.state={id:-1}}),!u)throw new Error("AxialComponent requires at least global scope. None found.");return n.scope=u,n}return i(t,e),u(t,[{key:"componentWillMount",value:function(){var e=this;p.forEach(function(t){"function"==typeof v&&(e[t]=v.bind(e))}),(0,a.as_scope)(this.scope).bind(this)}},{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){this.props.hasOwnProperty("scope")&&(0,a.pop)(),(0,a.as_scope)(this.scope).unbind(this)}},{key:"update",value:function(e,t,n){t!==n&&this.setState({id:l++})}}]),t}(s.default.Component);t.default=y},function(t,n){t.exports=e}]).default});
//# sourceMappingURL=axial.min.js.map